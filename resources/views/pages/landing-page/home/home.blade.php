<div class="wrappp">
    <x-navbar />
    <div class="wrap  px-3 md:px-0 m-auto container text-blac">
        <div class="px-20 head text-black pt-[120px] items-center flex md:flex-row flex-col gap-3">
            <div class="">
                <img class="w-[260px] md:w-[400px]" src="/Images/bann.png" alt="">
            </div>
            <div class="teks ml-2 max-w-[850px] ">
                <div class="head text-[28px] md:text-[32px] ">
                    Sistem informasi geografis lokasi praktik dokter spesialis
                </div>
                <div class=" subhead text-[20px] md:text-[22px]">
                    Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been
                    the
                    industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of
                    type
                    and scrambled it to make a type specimen book. It has survived not only five centuries, but also
                    the
                    leap into electronic typesetting,
                    Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been
                    the
                    industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of
                    type
                </div>
            </div>
        </div>
        {{-- map --}}
        <div class="map flex flex-col items-center mt-10 gap-3">
            <div class="head text-[28px] md:text-[32px] text-black">Peta Penyebaran Lokasi Dokter Spesialis Bandar
                Lampung</div>
            <div class="wrap-map w-full h-[540px]">
                <div class="w-full h-full" wire:ignore id='map' style='width: 100%; height: 120%;'></div>
            </div>
            <div class="text-[20px] mb-10 mt-3 text-white flex gap-5">
                <a href="/map" class="spesialis bg-[#84A584] hover:bg-[#587558] p-2 px-4 rounded">Open Map</a>
            </div>
        </div>
    </div>
    {{-- artikel --}}
    <div class="artikel text-black bg-white pt-10">
        <div class="head font-semibold text-center text-[30px] text-black">Artikel Kesehatan</div>
        <div class="card-wrapp flex justify-evenly flex-wrap gap-5 container text-black m-auto mt-10">
            <a href="/detail-artikel"
                class="cardd w-[350px] bg-white hover:bg-gray-100 cursor-pointer duration-200 flex flex-col rounded shadow-lg overflow-hidden">
                <div class="img w-full h-[180px] bg-blue-400 "></div>
                <div class="px-2 pt-2 text-[14px] md:text-[16px] text-black font-semibold underline underline-offset-2">Judul Artikel Kesehatan Sistem informasi
                    geografis lokasi praktik dokter
                    spesialis
                </div>
                <div class="teks px-2 text-[12px] md:text-[14px]">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ad nobis dolorem laudantium aliquam
                    esse!
                    Eligendi ad eum voluptates? Dolorum, eveniet.
                </div>
            </a>
            <a href="/detail-artikel"
                class="cardd w-[350px] bg-white hover:bg-gray-100 cursor-pointer duration-200 flex flex-col rounded shadow-lg overflow-hidden">
                <div class="img w-full h-[180px] bg-blue-400 "></div>
                <div class="px-2 pt-2 text-[14px] md:text-[16px] text-black font-semibold underline underline-offset-2">Judul Artikel Kesehatan Sistem informasi
                    geografis lokasi praktik dokter
                    spesialis
                </div>
                <div class="teks px-2 text-[12px] md:text-[14px]">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ad nobis dolorem laudantium aliquam
                    esse!
                    Eligendi ad eum voluptates? Dolorum, eveniet.
                </div>
            </a>
            <a href="/detail-artikel"
                class="cardd w-[350px] bg-white hover:bg-gray-100 cursor-pointer duration-200 flex flex-col rounded shadow-lg overflow-hidden">
                <div class="img w-full h-[180px] bg-blue-400 "></div>
                <div class="px-2 pt-2 text-[14px] md:text-[16px] text-black font-semibold underline underline-offset-2">Judul Artikel Kesehatan Sistem informasi
                    geografis lokasi praktik dokter
                    spesialis
                </div>
                <div class="teks px-2 text-[12px] md:text-[14px]">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ad nobis dolorem laudantium aliquam
                    esse!
                    Eligendi ad eum voluptates? Dolorum, eveniet.
                </div>
            </a>
            <a href="/detail-artikel"
                class="cardd w-[350px] bg-white hover:bg-gray-100 cursor-pointer duration-200 flex flex-col rounded shadow-lg overflow-hidden">
                <div class="img w-full h-[180px] bg-blue-400 "></div>
                <div class="px-2 pt-2 text-[14px] md:text-[16px] text-black font-semibold underline underline-offset-2">Judul Artikel Kesehatan Sistem informasi
                    geografis lokasi praktik dokter
                    spesialis
                </div>
                <div class="teks px-2 text-[12px] md:text-[14px]">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ad nobis dolorem laudantium aliquam
                    esse!
                    Eligendi ad eum voluptates? Dolorum, eveniet.
                </div>
            </a>
            <a href="/detail-artikel"
                class="cardd w-[350px] bg-white hover:bg-gray-100 cursor-pointer duration-200 flex flex-col rounded shadow-lg overflow-hidden">
                <div class="img w-full h-[180px] bg-blue-400 "></div>
                <div class="px-2 pt-2 text-[14px] md:text-[16px] text-black font-semibold underline underline-offset-2">Judul Artikel Kesehatan Sistem informasi
                    geografis lokasi praktik dokter
                    spesialis
                </div>
                <div class="teks px-2 text-[12px] md:text-[14px]">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ad nobis dolorem laudantium aliquam
                    esse!
                    Eligendi ad eum voluptates? Dolorum, eveniet.
                </div>
            </a>
            <a href="/detail-artikel"
                class="cardd w-[350px] bg-white hover:bg-gray-100 cursor-pointer duration-200 flex flex-col rounded shadow-lg overflow-hidden">
                <div class="img w-full h-[180px] bg-blue-400 "></div>
                <div class="px-2 pt-2 text-[14px] md:text-[16px] text-black font-semibold underline underline-offset-2">Judul Artikel Kesehatan Sistem informasi
                    geografis lokasi praktik dokter
                    spesialis
                </div>
                <div class="teks px-2 text-[12px] md:text-[14px]">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ad nobis dolorem laudantium aliquam
                    esse!
                    Eligendi ad eum voluptates? Dolorum, eveniet.
                </div>
            </a>
        </div>
        <div class="more flex justify-center pb-10">
            <button class="m-auto mt-5 bg-[#534B3C] text-[18px] text-white px-10 shadow py-2 rounded more">
                More
            </button>
        </div>
    </div>
    {{-- footer --}}
    <div class="ftr bg-[#84A584] py-14 flex flex-col md:flex-row">
        <div class="md:w-[30%] w-full text-white pl-20">
            <div class="con">Contact Us :</div>
            <div class="con">Telp :</div>
            <div class="con">Email :</div>
        </div>
        <div class="md:w-[40%] w-full font-semibold flex justify-center items-center text-white text-center">
            @ 2024 All Rights Reserved.
        </div>
        <div class="w-[30%]"></div>
    </div>
</div>


@push('scripts')
    <script>
        const defaultLocation = [{{ (float)env('MAPBOX_DEFAULT_LONG') }}, {{ (float)env('MAPBOX_DEFAULT_LAT') }}];

        mapboxgl.accessToken = '{{ env('MAPBOX_KEY') }}';
        var map = new mapboxgl.Map({
            container: 'map',
            center: defaultLocation,
            zoom: 11.15,
            style: 'mapbox://styles/mapbox/streets-v11'
        });

        const geoJson = {
            "type": "FeatureCollection",
            "features": [{
                    "type": "Feature",
                    "geometry": {
                        "coordinates": [
                            "106.73830754205",
                            "-6.2922403995615"
                        ],
                        "type": "Point"
                    },
                    "properties": {
                        "iconSize": [
                            50,
                            50
                        ],
                        "locationId": 30,
                        "name": "Dr. Muhammad Saiful, Sp.PD",
                        "image": "https://krakataumedika.com/images/dr_Eko.png",
                        "spesialis": "Spesialis Penyakit Dalam",
                        "telepon": "0856234234333",
                        "rating": 0,
                        "alamat": "Jl. Jati 1 no 12, Way Halim, Bandar Lampung",
                        "jadwal": "Jumat, 10.00 wib - 13.00 wib\nSenin, 08.00 wib - 14.00 wib",
                        "maps": "https://maps.app.goo.gl/2WrYVtLzUMinwF576",
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "coordinates": [
                            "106.68681595869",
                            "-6.3292244652013"
                        ],
                        "type": "Point"
                    },
                    "properties": {
                        "iconSize": [
                            50,
                            50
                        ],
                        "locationId": 29,
                        "name": "Dr. Burhan",
                        "image": "https://www.krakataumedika.com/images/dr_Hadi_New.png",
                        "spesialis": "Spesialis Penyakit Dalam",
                        "telepon": "0856234234333",
                        "rating": 4,
                        "alamat": "Jl. Jati 1 no 12, Way Halim, Bandar Lampung",
                        "jadwal": "Jumat, 10.00 wib - 13.00 wib\nSenin, 08.00 wib - 14.00 wib",
                        "maps": "https://maps.app.goo.gl/2WrYVtLzUMinwF576",
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "coordinates": [
                            "106.62490035406",
                            "-6.3266855038639"
                        ],
                        "type": "Point"
                    },
                    "properties": {

                        "iconSize": [
                            50,
                            50
                        ],
                        "locationId": 22,
                        "name": "Dr. Hirawati",
                        "image": "https://krakataumedika.com/images/dra_Entin.png",
                        "spesialis": "Spesialis Anak",
                        "telepon": "0856234234333",
                        "rating": 5,
                        "alamat": "Jl. Jati 1 no 12, Way Halim, Bandar Lampung",
                        "jadwal": "Jumat, 10.00 wib - 13.00 wib\nSenin, 08.00 wib - 14.00 wib",
                        "maps": "https://maps.app.goo.gl/2WrYVtLzUMinwF576",
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "coordinates": [
                            "106.72391468711",
                            "-6.3934163494543"
                        ],
                        "type": "Point"
                    },
                    "properties": {

                        "iconSize": [
                            50,
                            50
                        ],
                        "locationId": 19,
                        "name": "Dr. Adam Suseno",
                        "image": "https://krakataumedika.com/images/dr_Anton_Sirait_.png",
                        "spesialis": "Spesialis Penyakit Dalam",
                        "telepon": "0856234234333",
                        "rating": 3,
                        "alamat": "Jl. Jati 1 no 12, Way Halim, Bandar Lampung",
                        "jadwal": "Jumat, 10.00 wib - 13.00 wib\nSenin, 08.00 wib - 14.00 wib",
                        "maps": "https://maps.app.goo.gl/2WrYVtLzUMinwF576",
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "coordinates": [
                            "106.67224158205",
                            "-6.3884963990263"
                        ],
                        "type": "Point"
                    },
                    "properties": {
                        "iconSize": [
                            50,
                            50
                        ],
                        "locationId": 18,
                        "name": "Dr. Witajari",
                        "image": "https://krakataumedika.com/images/dr_Elsa.png",
                        "spesialis": "Spesialis Penyakit Dalam",
                        "telepon": "0856234234333",
                        "rating": 3,
                        "alamat": "Jl. Jati 1 no 12, Way Halim, Bandar Lampung",
                        "jadwal": "Jumat, 10.00 wib - 13.00 wib\nSenin, 08.00 wib - 14.00 wib",
                        "maps": "https://maps.app.goo.gl/2WrYVtLzUMinwF576",
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "coordinates": [
                            "106.74495523289",
                            "-6.3642034511073"
                        ],
                        "type": "Point"
                    },
                    "properties": {
                        "iconSize": [
                            50,
                            50
                        ],
                        "locationId": 12,
                        "name": "Dr. Putri Ratu",
                        "image": "https://krakataumedika.com/images/dr_Inne.png",
                        "spesialis": "Spesialis Penyakit Dalam",
                        "telepon": "0856234234333",
                        "rating": 4,
                        "alamat": "Jl. Jati 1 no 12, Way Halim, Bandar Lampung",
                        "jadwal": "Jumat, 10.00 wib - 13.00 wib\nSenin, 08.00 wib - 14.00 wib",
                        "maps": "https://maps.app.goo.gl/2WrYVtLzUMinwF576",
                    }
                }
            ]
        }

        const loadLocations = () => {
            geoJson.features.forEach((location) => {
                const {
                    geometry,
                    properties
                } = location;
                const {
                    locationId,
                    name,
                    image,
                    telepon,
                    rating,
                    spesialis,
                    alamat,
                    jadwal,
                    maps
                } = properties;

                let markerElement = document.createElement('div');
                markerElement.className = 'marker' + locationId;
                markerElement.id = locationId;
                markerElement.style.backgroundImage =
                    'url(https://cdn-icons-png.flaticon.com/512/9193/9193824.png)';
                markerElement.style.backgroundSize = 'cover';
                markerElement.style.width = '50px';
                markerElement.style.height = '50px';

                // RATING Star
                let ratingStars = '';
                if (rating === undefined || rating === null || isNaN(rating) || rating === 0) {
                    ratingStars = 'Belum memiliki rating';
                } else {
                    for (let i = 0; i < 5; i++) {
                        if (i < rating) {
                            ratingStars += `<svg class="w-4 h-4 ms-1 text-yellow-300" aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                                            <path
                                                d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                                        </svg>`;
                        } else {
                            ratingStars += `<svg class="w-4 h-4 ms-1 text-gray-300 dark:text-gray-500" aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                                            <path
                                                d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                                        </svg>`;
                        }
                    }
                }

                const contents = `
                <div
                    class="dokter1  md:w-[310px] w-[260px] bg-[#84A584] border-[#BCB3A3] border p-3 flex gap-3 rounded-lg shadow-lg">
                    <div class="foto aspect-square h-[75px] md:h-[85px] rounded-lg overflow-hidden">
                        <img class="w-full h-full object-cover" src= ${image} alt="">
                    </div>
                    <div class="detail flex flex-col justify-between text-white">
                        <div class="wrap flex flex-col gap-1">
                            <div class="nama text-[10px] md:text-[12px] font-semibold">
                                ${name}
                            </div>
                            <div class="sep md:text-[11px] text-[10px] medium">
                                ${spesialis}
                            </div>
                            <div class="no flex gap-2 items-center">
                                <div class="logo">
                                    <img src="/Images/telepon.svg" alt="">
                                </div>
                                <div class="no md:text-[11px] text-[10px] ">${telepon}</div>
                            </div>
                        </div>
                        <div class="wrap gap-3 flex items-center">
                            <div class="star flex">
                                ${ratingStars}
                            </div>
                            <a href="${maps}"  target="_blank"  class="p-1 bg-white text-[11px] text-black rounded">
                                Lihat Rute
                            </a>
                        </div>
                    </div>
                </div>
                `


                const popup = new mapboxgl.Popup({
                    offset: 25
                }).setHTML(contents).setMaxWidth("400px")

                new mapboxgl.Marker(markerElement)
                    .setPopup(popup)
                    .setLngLat(geometry.coordinates)
                    .addTo(map);
                markerElement.addEventListener('click', function() {
                    document.getElementById('detail-info').innerHTML = detaill;
                });
            });
        };

        loadLocations();

        map.addControl(new mapboxgl.NavigationControl());

        map.on('click', (e) => {
            const longitude = e.lngLat.lng;
            const latitude = e.lngLat.lat;

            @this.long = longitude
            @this.lat = latitude

            console.log({
                longitude,
                latitude
            });


        });



        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'modal': 'rgba(0, 0, 0, 0.35)',
                    }
                }
            }
        }
    </script>
@endpush
